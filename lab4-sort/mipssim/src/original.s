.text
main:
    ADDIU   $r4,    $r0,    a               # $r4 载入数组 a 的地址
    ADDIU   $r5,    $r0,    n               # $r5 载入数组长度 n 的地址
    LW      $r5,    0($r5)                  # $r5 载入数组长度 n
    ADDI    $r5,    $r5,    -1              # $r5 -= 1
    SLL     $r5,    $r5,    2               # $r5 *= 4
    ADD     $r5,    $r4,    $r5             # $r5 作为数组 a 最后一个元素的地址
    BEQ     $r4,    $r5,    _AFTER_L1       # 若 $r4 == $5，说明数组长度为 1，无需排序

_L1:
    ADDIU   $r8,    $r4,    0               # $r8 -> &a[i]
    ADDIU   $r9,    $r4,    4               # $r9 -> &a[i+1]
_L2:
    LW      $r10,   0($r8)                  # $r10 载入 a[i]
    LW      $r11,   0($r9)                  # $r11 载入 a[i+1]
    SLT     $r12,   $r10,   $r11            # $r12 = a[i] < a[i+1]
    BNEZ    $r12,   _AFTER_SWAP             # a[i] < a[i+1]，不需要交换
    SW      $r10,   0($r9)                  # 将 a[i] 的值放到 a[i+1] 的位置
    SW      $r11,   0($r8)                  # 将 a[i+1] 的值放到 a[i] 的位置
_AFTER_SWAP:
    ADDIU   $r8,    $r8,    4               # $r8 地址向后偏移
    ADDIU   $r9,    $r9,    4               # $r9 地址向后偏移
    BNE     $r8,    $r5,    _L2             # 若 $r8 != $5，则继续循环 _L2

_AFTER_L2:
    ADDIU   $r5,    $r5,    -4              # 完成一轮排序，$r5 地址向前偏移
    BNE     $r4,    $r5,    _L1             # 若 $r4 != $r5，则继续循环 _L1

_AFTER_L1:
    TEQ     $r0,    $r0

.data
a:  .word
 768, 209, 577, 587, 127, 468, 539, 843, 201, 411,
 968, 805, 856, 493, 400, 596, 629, 422, 127, 595,
 667, 894, 554, 378, 856, 178, 292, 941, 494, 250,
 285, 864, 373, 496, 285, 138, 342, 721, 784, 294,
 339, 271, 294, 327, 641, 400, 977, 284, 814, 136,
 475, 629, 818, 888, 787, 540, 872, 236, 953, 541,
 484, 879, 186, 560, 975, 241, 508, 995, 241, 444,
 795, 963, 115, 156, 613, 303, 638, 550, 503, 356,
 272, 564, 454, 311, 738, 835, 329, 992, 983, 527,
 925, 581, 294, 426, 614, 453, 767, 292, 209, 692,
 436, 620, 425, 328, 898, 119, 532, 764, 152, 106,
 189, 446, 810, 677, 383, 690, 469, 467, 205, 276,
 175, 519, 576, 700, 189, 167, 942, 792, 327, 135,
 337, 410, 232, 834, 258, 209, 155, 265, 260, 303,
 938, 129, 370, 363, 479, 538, 233, 625, 392, 435,
 757, 113, 903, 262, 897, 314, 928, 277, 433, 194,
 393, 681, 971, 383, 497, 714, 176, 910, 793, 722,
 338, 989, 638, 574, 283, 520, 764, 206, 331, 829,
 982, 823, 858, 585, 488, 744, 263, 311, 571, 720,
 580, 832, 951, 635, 899, 797, 613, 208, 805, 591
n:  .word
 200
